!function(){var a=function(a){$("#slym-inner .slym-error").hide().html(a.message).slideDown(),$("#slym-password").val("").focus()},b=function(a){a?($("#slym-inner .slym-loading").slideDown(),$("#slym-username, #slym-password, #slym-login-btn").prop("disabled",!0)):($("#slym-inner .slym-loading").slideUp(),$("#slym-username, #slym-password, #slym-login-btn").prop("disabled",!1))},c=function(){b(!0),W.User.login($("#slym-username").val(),$("#slym-password").val(),[function(){d(function(a){W.UserInterface.load(a.get("name"))})},function(c){b(!1),a(c.getError())}])},d=function(a){a=Webos.Callback.toCallback(a),W.UserInterface.getList([function(b){for(var c,d=0;d<b.length;d++){var e=b[d];-1!=jQuery.inArray("userInterface",e.get("labels"))&&(e.get("default")||!c)&&(c=e)}a.success(c)},a.error])},e=function(a,b){b=Webos.Callback.toCallback(b),d([function(b){window.location.href=Webos.buildWebosUrl({ui:b.get("name"),app:a})},b.error])},f=function(a){e("gnome-register",a)},g=function(a){e("gnome-forgot-password",a)};$("#slym-inner").submit(function(a){a.preventDefault(),c()}),$("#slym-username").keyup(function(){$("#slym-username").val().length>0&&$("#slym-inner").removeClass("slym-nosubmit")}),$("#slym-register-btn").click(function(a){a.preventDefault(),f()}),$("#slym-forgot-password-btn").click(function(a){a.preventDefault(),g()}),Webos.User.canResetPassword([function(a){a.enabled||($("#slym-forgot-password-btn").hide(),$("#slym-inner .slym-links-separator").hide())},function(){}]),Webos.User.canRegister([function(a){a.register||($("#slym-register-btn").hide(),$("#slym-inner .slym-links-separator").hide())},function(){}]),Webos.Translation.load(function(a){$("#slym-username").attr("placeholder",a.get("Username")),$("#slym-password").attr("placeholder",a.get("Password")),$("#slym-inner .slym-loading .slym-loading-inner").html(a.get("Loading...")),$("#slym-forgot-password-btn").html(a.get("Forgot password ?")),$("#slym-register-btn").html(a.get("Register"))},"slym"),$("#slym-username").focus()}();